code_name: 'Tinker 9'
docker:
  image_name: 'mdi/tinker9-cpu'
  gpu:
    type: 'nvidia'

  build_image:
    - apt-get update
    - apt-get install -y --no-install-recommends git wget vim
    - apt-get install -y --no-install-recommends libfftw3-dev
    - pip install cmake

  build_engine:
    - |
      if [ ! -d "/repo/build/tinker9" ]; then
        git clone https://github.com/TinkerTools/tinker9.git /repo/build/tinker9
      fi
    - cd /repo/build/tinker9
    - rm -rf build
    - mkdir -p build
    - cd build
    - FC=gfortran TINKER_CUDART=1 cmake -DHOST=ON -DPREC=double ..
    - make
    - make test

  validate_engine:
    - echo "Insert code that will confirm that your code has been built successfully"
    - exit 1

engine_tests:
  # Provide at least one example input that can be used to test your code's MDI functionality
  script:
    - echo "Insert commands to run an example calculation here"
    - exit 1
